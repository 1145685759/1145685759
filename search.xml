<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>有人云PC端——WPF框架初探(二)</title>
      <link href="/1145685759//abbrlink/"/>
      <url>/1145685759//abbrlink/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\1145685759\assets\css\APlayer.min.css"><script src="\1145685759\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>感谢阅读我的博客，这一系列播客介绍的是我为了完成PC端控制有人云控制台所写的一个WPF客户端应用程序</p><h2 id="主界面的搭建"><a href="#主界面的搭建" class="headerlink" title="主界面的搭建"></a>主界面的搭建</h2><p>我们主界面采用传统导航栏的方式进行页面导航，通过导航键加载页面到主界面容器控件内从而显示用户页面。</p><h3 id="标题栏设计"><a href="#标题栏设计" class="headerlink" title="标题栏设计"></a>标题栏设计</h3><p>这是我们想要实现的效果，</p><p><img src="https://pic.imgdb.cn/item/60e538665132923bf848c018.png" alt="标题栏"></p><p>从图中可以看出这是一个工具条（ToolBar），我们要将这个工具条放入窗体的标题栏中，这就需要Handyorg给我们提供的<code>NonClientAreaContent</code>容器控件，该控件允许我们向窗体的标题栏中添加其他控件。</p><p>我想通过标题栏实现切换系统的色调、主题颜色、语言的功能并且能够通过标题栏实现用户登录的功能，因此我们需要对工具条的设计如下</p><pre class="line-numbers language-xaml" data-language="xaml"><code class="language-xaml">&lt;ToolBar Band="2" Padding="6" Background="Transparent"&gt;                &lt;Menu Background="Transparent" VerticalAlignment="Center" &gt;                    &lt;MenuItem Header="系统主题"&gt;                        &lt;MenuItem Header="明亮" Click="MenuItem_Click"/&gt;                        &lt;MenuItem Header="黑暗" Click="MenuItem_Click"/&gt;                    &lt;/MenuItem&gt;                    &lt;MenuItem Header="主色调"&gt;                        &lt;MenuItem Header="切换" Click="MenuItemColor_Click"/&gt;                    &lt;/MenuItem&gt;                    &lt;MenuItem Header="语言"&gt;                        &lt;MenuItem Header="中文" Click="MenuItemLanguage_Click"/&gt;                        &lt;MenuItem Header="英语" Click="MenuItemLanguage_Click"/&gt;                    &lt;/MenuItem&gt;                    &lt;MenuItem Header="用户"&gt;                        &lt;MenuItem Header="登录" Click="MenuItemLogin_Click"/&gt;                        &lt;MenuItem Header="编辑" Click="MenuItemLanguage_Click"/&gt;                    &lt;/MenuItem&gt;                    &lt;MenuItem Header="当前用户："/&gt;                    &lt;MenuItem Header="{Binding UserName}" Name="username"/&gt;                &lt;/Menu&gt;            &lt;/ToolBar&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中涉及到的绑定（Binding）由于解释起来较为繁琐，日后会专门写文章来介绍绑定的用法，当然这会涉及到MVVM架构了，好了这个我们日后再说，先看下效果，</p><p>这就实现了我们对界面的要求，那么接下来看后台代码如何实现</p><h5 id="系统主题的切换"><a href="#系统主题的切换" class="headerlink" title="系统主题的切换"></a>系统主题的切换</h5><p>我们将主题分为明亮和黑暗两种，其实现方式实际上是应用了我们事先准备好的资源字典，在资源字典中事先定义好画刷以及颜色从而实现一键切换主题，其没有什么技术难点，此处就不深究了，你也可以自己定义其他的主题颜色，只需更改后台的资源字典所定义的画刷等设置即可，在此我贴出我的主题资源字典，供参考</p><pre class="line-numbers language-xaml" data-language="xaml"><code class="language-xaml">&lt;ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                     xmlns:system="clr-namespace:System;assembly=mscorlib"&gt;    &lt;Color x:Key="MainBackgroundColor"&gt;#FF262E2F&lt;/Color&gt;    &lt;Color x:Key="MainContentForegroundColor"&gt;#FF1A1A1A&lt;/Color&gt;    &lt;Color x:Key="MainContentBackgroundColor"&gt;#FF1C1C1C&lt;/Color&gt;    &lt;Color x:Key="PrimaryTextColor"&gt;#FFFFFFFF&lt;/Color&gt;    &lt;Color x:Key="SecondaryTextColor"&gt;#FF757575&lt;/Color&gt;    &lt;Color x:Key="ThirdlyTextColor"&gt;#FF3F3F46&lt;/Color&gt;    &lt;Color x:Key="ReverseTextColor"&gt;#FF212121&lt;/Color&gt;    &lt;Color x:Key="TextIconColor"&gt;#FFFFFFFF&lt;/Color&gt;    &lt;Color x:Key="BorderColor"&gt;#FF3F3F46&lt;/Color&gt;    &lt;Color x:Key="SecondaryBorderColor"&gt;#FF555555&lt;/Color&gt;    &lt;Color x:Key="BackgroundColor"&gt;#FFEEEEEE&lt;/Color&gt;    &lt;Color x:Key="RegionColor"&gt;#FF1C1C1C&lt;/Color&gt;    &lt;Color x:Key="SecondaryRegionColor"&gt;#FF2D2D30&lt;/Color&gt;    &lt;Color x:Key="ThirdlyRegionColor"&gt;#FF424242&lt;/Color&gt;    &lt;Color x:Key="DefaultColor"&gt;#FF686868&lt;/Color&gt;    &lt;Color x:Key="DarkDefaultColor"&gt;#FF686868&lt;/Color&gt;    &lt;Color x:Key="AccentColor"&gt;#FFFF5722&lt;/Color&gt;    &lt;Color x:Key="DarkAccentColor"&gt;#FFD43F3A&lt;/Color&gt;    &lt;Color x:Key="DarkMaskColor"&gt;#40000000&lt;/Color&gt;    &lt;Color x:Key="DarkOpacityColor"&gt;#40000000&lt;/Color&gt;    &lt;system:UInt32 x:Key="BlurGradientValue"&gt;0x99000000&lt;/system:UInt32&gt;    &lt;LinearGradientBrush x:Key="AccentBrush" EndPoint="1,0" StartPoint="0,0"&gt;        &lt;GradientStop Color="{DynamicResource AccentColor}" Offset="0"/&gt;        &lt;GradientStop Color="{DynamicResource DarkAccentColor}" Offset="1"/&gt;    &lt;/LinearGradientBrush&gt;    &lt;SolidColorBrush x:Key="DarkAccentBrush" Color="{DynamicResource DarkAccentColor}"/&gt;    &lt;SolidColorBrush x:Key="MainBackgroundBrush" Color="{DynamicResource MainBackgroundColor}"/&gt;    &lt;SolidColorBrush x:Key="MainContentForegroundBrush" Color="{DynamicResource MainContentForegroundColor}"/&gt;    &lt;SolidColorBrush x:Key="MainContentBackgroundBrush" Color="{DynamicResource MainContentBackgroundColor}"/&gt;    &lt;SolidColorBrush x:Key="PrimaryTextBrush" Color="{DynamicResource PrimaryTextColor}"/&gt;    &lt;SolidColorBrush x:Key="SecondaryTextBrush" Color="{DynamicResource SecondaryTextColor}"/&gt;    &lt;SolidColorBrush x:Key="ThirdlyTextBrush" Color="{DynamicResource ThirdlyTextColor}"/&gt;    &lt;SolidColorBrush x:Key="ReverseTextBrush" Color="{DynamicResource ReverseTextColor}"/&gt;    &lt;SolidColorBrush x:Key="TextIconBrush" Color="{DynamicResource TextIconColor}"/&gt;    &lt;SolidColorBrush x:Key="BorderBrush" Color="{DynamicResource BorderColor}"/&gt;    &lt;SolidColorBrush x:Key="SecondaryBorderBrush" Color="{DynamicResource SecondaryBorderColor}"/&gt;    &lt;SolidColorBrush x:Key="BackgroundBrush" Color="{DynamicResource BackgroundColor}"/&gt;    &lt;SolidColorBrush x:Key="RegionBrush" Color="{DynamicResource RegionColor}"/&gt;    &lt;SolidColorBrush x:Key="SecondaryRegionBrush" Color="{DynamicResource SecondaryRegionColor}"/&gt;    &lt;SolidColorBrush x:Key="ThirdlyRegionBrush" Color="{DynamicResource ThirdlyRegionColor}"/&gt;    &lt;SolidColorBrush x:Key="DefaultBrush" Color="{DynamicResource DefaultColor}"/&gt;    &lt;SolidColorBrush x:Key="DarkDefaultBrush" Color="{DynamicResource DarkDefaultColor}"/&gt;    &lt;SolidColorBrush x:Key="DarkMaskBrush" Color="{DynamicResource DarkMaskColor}"/&gt;    &lt;SolidColorBrush x:Key="DarkOpacityBrush" Color="{DynamicResource DarkOpacityColor}"/&gt;    &lt;DrawingBrush x:Key="MainContentForegroundDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,16,16" ViewportUnits="Absolute" Stretch="None" TileMode="Tile"&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;DrawingGroup&gt;                &lt;GeometryDrawing Brush="{DynamicResource MainContentForegroundBrush}"&gt;                    &lt;GeometryDrawing.Geometry&gt;                        &lt;GeometryGroup&gt;                            &lt;RectangleGeometry Rect="0,0,8,8" /&gt;                            &lt;RectangleGeometry Rect="8,8,8,8" /&gt;                        &lt;/GeometryGroup&gt;                    &lt;/GeometryDrawing.Geometry&gt;                &lt;/GeometryDrawing&gt;            &lt;/DrawingGroup&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="GitHubDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,200,100" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;DrawingGroup&gt;                &lt;GeometryDrawing Brush="{DynamicResource DarkMaskBrush}" Geometry="{StaticResource GitHubStrGeometry}"/&gt;            &lt;/DrawingGroup&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="QqDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,100,200" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;DrawingGroup&gt;                &lt;GeometryDrawing Brush="{DynamicResource DarkMaskBrush}" Geometry="{StaticResource QqGeometry}"/&gt;            &lt;/DrawingGroup&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="BlogDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,120,100" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;GeometryDrawing&gt;                &lt;GeometryDrawing.Geometry&gt;                    &lt;RectangleGeometry Rect="0,0,120,100"&gt;&lt;/RectangleGeometry&gt;                &lt;/GeometryDrawing.Geometry&gt;                &lt;GeometryDrawing.Brush&gt;                    &lt;VisualBrush&gt;                        &lt;VisualBrush.Visual&gt;                            &lt;StackPanel&gt;                                &lt;TextBlock Text="Blog" Foreground="{DynamicResource DarkMaskBrush}"/&gt;                            &lt;/StackPanel&gt;                        &lt;/VisualBrush.Visual&gt;                    &lt;/VisualBrush&gt;                &lt;/GeometryDrawing.Brush&gt;            &lt;/GeometryDrawing&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="ProjectDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,200,100" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;GeometryDrawing&gt;                &lt;GeometryDrawing.Geometry&gt;                    &lt;RectangleGeometry Rect="0,0,200,100"&gt;&lt;/RectangleGeometry&gt;                &lt;/GeometryDrawing.Geometry&gt;                &lt;GeometryDrawing.Brush&gt;                    &lt;VisualBrush&gt;                        &lt;VisualBrush.Visual&gt;                            &lt;StackPanel&gt;                                &lt;TextBlock Text="Project" Foreground="{DynamicResource DarkMaskBrush}"/&gt;                            &lt;/StackPanel&gt;                        &lt;/VisualBrush.Visual&gt;                    &lt;/VisualBrush&gt;                &lt;/GeometryDrawing.Brush&gt;            &lt;/GeometryDrawing&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;&lt;/ResourceDictionary&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此资源字典为黑暗</p><pre class="line-numbers language-xaml" data-language="xaml"><code class="language-xaml">&lt;ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                    xmlns:system="clr-namespace:System;assembly=mscorlib"&gt;    &lt;Color x:Key="MainBackgroundColor"&gt;#FF262E2F&lt;/Color&gt;    &lt;Color x:Key="MainContentForegroundColor"&gt;#FFF0F0F0&lt;/Color&gt;    &lt;Color x:Key="MainContentBackgroundColor"&gt;#FFF5F5F5&lt;/Color&gt;    &lt;Color x:Key="PrimaryTextColor"&gt;#FF212121&lt;/Color&gt;    &lt;Color x:Key="SecondaryTextColor"&gt;#FF757575&lt;/Color&gt;    &lt;Color x:Key="ThirdlyTextColor"&gt;#FFBDBDBD&lt;/Color&gt;    &lt;Color x:Key="ReverseTextColor"&gt;#FF212121&lt;/Color&gt;    &lt;Color x:Key="TextIconColor"&gt;#FFFFFFFF&lt;/Color&gt;    &lt;Color x:Key="BorderColor"&gt;#FFE0E0E0&lt;/Color&gt;    &lt;Color x:Key="SecondaryBorderColor"&gt;#FF757575&lt;/Color&gt;    &lt;Color x:Key="BackgroundColor"&gt;#FFEEEEEE&lt;/Color&gt;    &lt;Color x:Key="RegionColor"&gt;#FFFFFFFF&lt;/Color&gt;    &lt;Color x:Key="SecondaryRegionColor"&gt;#FFEEEEEE&lt;/Color&gt;    &lt;Color x:Key="ThirdlyRegionColor"&gt;#FFFFFFFF&lt;/Color&gt;    &lt;Color x:Key="DefaultColor"&gt;#FFFFFFFF&lt;/Color&gt;    &lt;Color x:Key="DarkDefaultColor"&gt;#FFF5F5F5&lt;/Color&gt;    &lt;Color x:Key="AccentColor"&gt;#FFF8491E&lt;/Color&gt;    &lt;Color x:Key="DarkAccentColor"&gt;#FFF8491E&lt;/Color&gt;    &lt;Color x:Key="DarkMaskColor"&gt;#20000000&lt;/Color&gt;    &lt;Color x:Key="DarkOpacityColor"&gt;#40000000&lt;/Color&gt;    &lt;system:UInt32 x:Key="BlurGradientValue"&gt;0x99FFFFFF&lt;/system:UInt32&gt;    &lt;LinearGradientBrush x:Key="AccentBrush" EndPoint="1,0" StartPoint="0,0"&gt;        &lt;GradientStop Color="{DynamicResource AccentColor}" Offset="0"/&gt;        &lt;GradientStop Color="{DynamicResource DarkAccentColor}" Offset="1"/&gt;    &lt;/LinearGradientBrush&gt;    &lt;SolidColorBrush x:Key="DarkAccentBrush" Color="{DynamicResource DarkAccentColor}"/&gt;    &lt;SolidColorBrush x:Key="MainBackgroundBrush" Color="{DynamicResource MainBackgroundColor}"/&gt;    &lt;SolidColorBrush x:Key="MainContentForegroundBrush" Color="{DynamicResource MainContentForegroundColor}"/&gt;    &lt;SolidColorBrush x:Key="MainContentBackgroundBrush" Color="{DynamicResource MainContentBackgroundColor}"/&gt;    &lt;SolidColorBrush x:Key="PrimaryTextBrush" Color="{DynamicResource PrimaryTextColor}"/&gt;    &lt;SolidColorBrush x:Key="SecondaryTextBrush" Color="{DynamicResource SecondaryTextColor}"/&gt;    &lt;SolidColorBrush x:Key="ThirdlyTextBrush" Color="{DynamicResource ThirdlyTextColor}"/&gt;    &lt;SolidColorBrush x:Key="ReverseTextBrush" Color="{DynamicResource ReverseTextColor}"/&gt;    &lt;SolidColorBrush x:Key="TextIconBrush" Color="{DynamicResource TextIconColor}"/&gt;    &lt;SolidColorBrush x:Key="BorderBrush" Color="{DynamicResource BorderColor}"/&gt;    &lt;SolidColorBrush x:Key="SecondaryBorderBrush" Color="{DynamicResource SecondaryBorderColor}"/&gt;    &lt;SolidColorBrush x:Key="BackgroundBrush" Color="{DynamicResource BackgroundColor}"/&gt;    &lt;SolidColorBrush x:Key="RegionBrush" Color="{DynamicResource RegionColor}"/&gt;    &lt;SolidColorBrush x:Key="SecondaryRegionBrush" Color="{DynamicResource SecondaryRegionColor}"/&gt;    &lt;SolidColorBrush x:Key="ThirdlyRegionBrush" Color="{DynamicResource ThirdlyRegionColor}"/&gt;    &lt;SolidColorBrush x:Key="DefaultBrush" Color="{DynamicResource DefaultColor}"/&gt;    &lt;SolidColorBrush x:Key="DarkDefaultBrush" Color="{DynamicResource DarkDefaultColor}"/&gt;    &lt;SolidColorBrush x:Key="DarkMaskBrush" Color="{DynamicResource DarkMaskColor}"/&gt;    &lt;SolidColorBrush x:Key="DarkOpacityBrush" Color="{DynamicResource DarkOpacityColor}"/&gt;    &lt;DrawingBrush x:Key="MainContentForegroundDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,16,16" ViewportUnits="Absolute" Stretch="None" TileMode="Tile"&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;DrawingGroup&gt;                &lt;GeometryDrawing Brush="{DynamicResource MainContentForegroundBrush}"&gt;                    &lt;GeometryDrawing.Geometry&gt;                        &lt;GeometryGroup&gt;                            &lt;RectangleGeometry Rect="0,0,8,8" /&gt;                            &lt;RectangleGeometry Rect="8,8,8,8" /&gt;                        &lt;/GeometryGroup&gt;                    &lt;/GeometryDrawing.Geometry&gt;                &lt;/GeometryDrawing&gt;            &lt;/DrawingGroup&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="GitHubDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,200,100" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;DrawingGroup&gt;                &lt;GeometryDrawing Brush="{DynamicResource DarkMaskBrush}" Geometry="{StaticResource GitHubStrGeometry}"/&gt;            &lt;/DrawingGroup&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="QqDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,100,200" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;DrawingGroup&gt;                &lt;GeometryDrawing Brush="{DynamicResource DarkMaskBrush}" Geometry="{StaticResource QqGeometry}"/&gt;            &lt;/DrawingGroup&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="BlogDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,120,100" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;GeometryDrawing&gt;                &lt;GeometryDrawing.Geometry&gt;                    &lt;RectangleGeometry Rect="0,0,120,100"&gt;&lt;/RectangleGeometry&gt;                &lt;/GeometryDrawing.Geometry&gt;                &lt;GeometryDrawing.Brush&gt;                    &lt;VisualBrush&gt;                        &lt;VisualBrush.Visual&gt;                            &lt;StackPanel&gt;                                &lt;TextBlock Text="Blog" Foreground="{DynamicResource DarkMaskBrush}"/&gt;                            &lt;/StackPanel&gt;                        &lt;/VisualBrush.Visual&gt;                    &lt;/VisualBrush&gt;                &lt;/GeometryDrawing.Brush&gt;            &lt;/GeometryDrawing&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;    &lt;DrawingBrush x:Key="ProjectDrawingBrush" RenderOptions.CachingHint="Cache" Viewport="0,0,200,100" ViewportUnits="Absolute" Stretch="Uniform" TileMode="Tile"&gt;        &lt;DrawingBrush.Transform&gt;            &lt;TransformGroup&gt;                &lt;RotateTransform Angle="20"/&gt;            &lt;/TransformGroup&gt;        &lt;/DrawingBrush.Transform&gt;        &lt;DrawingBrush.Drawing&gt;            &lt;GeometryDrawing&gt;                &lt;GeometryDrawing.Geometry&gt;                    &lt;RectangleGeometry Rect="0,0,200,100"&gt;&lt;/RectangleGeometry&gt;                &lt;/GeometryDrawing.Geometry&gt;                &lt;GeometryDrawing.Brush&gt;                    &lt;VisualBrush&gt;                        &lt;VisualBrush.Visual&gt;                            &lt;StackPanel&gt;                                &lt;TextBlock Text="Project" Foreground="{DynamicResource DarkMaskBrush}"/&gt;                            &lt;/StackPanel&gt;                        &lt;/VisualBrush.Visual&gt;                    &lt;/VisualBrush&gt;                &lt;/GeometryDrawing.Brush&gt;            &lt;/GeometryDrawing&gt;        &lt;/DrawingBrush.Drawing&gt;    &lt;/DrawingBrush&gt;&lt;/ResourceDictionary&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此资源字典为明亮</p><p>我们只要将系统主题的MenuItem的点击事件实现切换资源字典即可，部分代码如下</p><pre class="line-numbers language-c#" data-language="c#"><code class="language-c#">private void MenuItem_Click(object sender, RoutedEventArgs e)       {           if (!(sender is MenuItem menuItem))           {               return;           }           string resourceStr = "pack://application:,,,/Resource/Style/Theme/BaseLight.xaml";           if (menuItem.Header.ToString() == "黑暗")           {               resourceStr = "pack://application:,,,/Resource/Style/Theme/BaseDark.xaml";           }           UpdataResourceDictionary(resourceStr, 0);       }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>主色调的切换同理，留给大家自己研究啦！</p><h5 id="语言的切换"><a href="#语言的切换" class="headerlink" title="语言的切换"></a>语言的切换</h5><p>实际上的原理也是资源字典的切换，Handyorg也给我们提供了切换语言的方法<code>ConfigHelper.Instance.SetLang("")</code>其可以切换我们所准备的语言的资源字典。</p><h5 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h5><p>用户登录我们采用Dialog的方式来实现，当我们点击标题栏的登录时，弹出登录界面Dialog，登录界面的设计下一篇文章再做讲解，这次先对弹出Dialog的后台代码进行分享，前端界面，创建Click事件就不必说了，后台也很简单，使用Handyorg的 <code>Dialog.Show(new LoginDialog());</code>即可。</p><p>好了大致的主界面的设计思想以及部分代码展示到这里就结束了，起始有许多代码我都没有贴出来，也不是我不分享，只是贴出来意义不大而且篇幅很长，这些需求都大同小异，无非就是切换资源字典罢了。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这篇文章主要讲了主界面的设计思路以及部分代码实现，主要涉及到的技术就是资源字典的切换，也没有其他什么过多的内容。下面看下最终的效果吧</p><p><img src="https://pic.imgdb.cn/item/60e538085132923bf8462ae7.gif" alt="最终效果"></p>]]></content>
      
      
      <categories>
          
          <category> WPF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>有人云PC端——WPF框架初探(一)</title>
      <link href="/1145685759//abbrlink/"/>
      <url>/1145685759//abbrlink/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\1145685759\assets\css\APlayer.min.css"><script src="\1145685759\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>感谢阅读我的博客，这一系列播客介绍的是我为了完成PC端控制有人云控制台所写的一个WPF客户端应用程序</p><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h3 id="有人云"><a href="#有人云" class="headerlink" title="有人云"></a>有人云</h3><p>有人云是一套快速搭建物联网系统的系统，有人云为企业提供软硬件一站式的解决方案，赋能众多细分行业，提供安全可靠的设备接入、应用开发、组态服务、运维管理、数据统计与分析等核心功能，全面开放平台化能力，以模块化、组件化、系统化的能力帮助企业低成本、高效率搭建自己的物联网系统！</p><h4 id="设备接入和管理"><a href="#设备接入和管理" class="headerlink" title="设备接入和管理"></a>设备接入和管理</h4><p>支持多种终端协议，亿级设备连接能力，轻松管理各地设备<br>通讯设备免配置：输入出厂编码，可直接添加上云<br>常用终端免配置：内置常用终端产品的数据点表</p><h4 id="监控运维"><a href="#监控运维" class="headerlink" title="监控运维"></a>监控运维</h4><p>可以通过网页或者手机端实现设备数据监控，第一时间了解设备运行状态、修改参数等。支持对设备的维保报修，完成对设备全生命周期的监控运维</p><h4 id="有人云控制台"><a href="#有人云控制台" class="headerlink" title="有人云控制台"></a>有人云控制台</h4><p>有人云控制台是一个基于浏览器的后端管理系统<br><img src="https://pic.imgdb.cn/item/60e515fc5132923bf88e5d57.png" alt="有人云控制台"><br>其可以连接有人云旗下的物联网关设备，并将其所连接的终端设备数据上传至有人云，同时可以设置其报警条件、组态页面等一系列操作</p><h4 id="组态应用"><a href="#组态应用" class="headerlink" title="组态应用"></a>组态应用</h4><p>无缝对接设备数据，通过可拖拽的应用开发工具，零编程零成本搭建所需场景的组态应用</p><h4 id="数据管理"><a href="#数据管理" class="headerlink" title="数据管理"></a>数据管理</h4><p>全面管理物联网数据资产，从设备数据到业务数据，从数据存储到数据统计分析</p><h4 id="SIM卡管理"><a href="#SIM卡管理" class="headerlink" title="SIM卡管理"></a>SIM卡管理</h4><p>平台拥有丰富的运营商资源，提供流量卡、NB卡等多种网络支持，月包、年包等百种档次的套餐产品，通过平台可以对设备使用SIM卡的流量状态、使用状态等进行全数据监控</p><h4 id="云监测"><a href="#云监测" class="headerlink" title="云监测"></a>云监测</h4><p>平台提供远程固件升级、远程配置等功能，形成对终端设备、通讯设备一体化、全方位的监控运维</p><h3 id="WPF框架"><a href="#WPF框架" class="headerlink" title="WPF框架"></a>WPF框架</h3><p>随着社会不断地发展，人们对软件UI的美观度也在不断地提升，传统的Winform框架已经渐渐得淡出了市场，WPF框架则应用的更加广泛，由于WPF的渲染是由显卡完成的，所以很多以前在Winform难以实现的界面变得轻而易举，并且社区上有许多WPF的控件库，制作也十分精美，因此我们此次的应用程序采用WPF的框架进行开发设计</p><h4 id="WPF控件库"><a href="#WPF控件库" class="headerlink" title="WPF控件库"></a>WPF控件库</h4><p>控件库采用的是CJ大神随手写的Handyorg控件库，在此膜拜下大佬！<br><img src="https://camo.githubusercontent.com/975b176bc9d961189a08f42ce0e40bc377124cd3afa6a94b7a5c8200b2a0b2cd/68747470733a2f2f67697465652e636f6d2f68616e64796f72672f48616e64794f72675265736f757263652f7261772f6d61737465722f48616e6479436f6e74726f6c2f5265736f75726365732f436f7665722e706e67" alt="Handyorg"><br><a href="https://github.com/HandyOrg/HandyControl">Handyorg控件库Github地址</a></p><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>1.有人云用户的增删改查<br>2.设备的管理<br>3.数据的处理<br>4.获取设备对应的组态列表<br>5.有人云用户的项目分组信息<br>6.Http 数据推送（需要申请二次开发权限）</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这篇文章主要介绍了下开发资源，后台方法是用有人云开放的API，然后应用程序采用WPF框架+Handyorg,后续我会分模块一点一点实现这个项目目标，请大家持续关注谢谢！</p>]]></content>
      
      
      <categories>
          
          <category> WPF </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
